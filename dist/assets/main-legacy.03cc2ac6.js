System.register(["./index-legacy.116e7c96.js"],(function(e,t){"use strict";var l,a=document.createElement("style");return a.textContent="p[data-v-fb528284]{font-size:15px}li[data-v-fb528284]{font-size:15px;margin-bottom:.6em}\n",document.head.appendChild(a),{setters:[function(e){l=e.n}],execute:function(){e("default",l({data:function(){return{formula:["option2","+","-"],varOptions:[{label:"第一个选项",value:"option1"},{label:"第二个选项222",value:"option2"},{label:"第三个选项选项选项",value:"option3",children:[{label:"option3_1",value:"option3_1"},{label:"option3_2",value:"option3_2"},{label:"option3_3",value:"option3_3"}]}],extraSymbols:[{label:"恶意非常规符号",value:"option11"},{label:"^",value:"^"},{label:"$",value:"$"}],codehtml:'<rt-formula-editor v-model="formula" :variableOptions="options"></rt-formula-editor>',code:'export default {\n  data() {\n    return {\n      formula: [],\n      options: [\n        { label: "option1", value: "option1" },\n        { label: "option2", value: "option2" },\n        {\n          label: "option3", value: "option3", children: [\n            { label: "option3_1", value: "option3_1" },\n            { label: "option3_2", value: "option3_2" },\n            { label: "option3_3", value: "option3_3" },\n          ]\n        },\n      ],\n    }\n  }\n}',attrTableData:[{arg:"value/v-model",des:"绑定值",type:"Array",options:" — ",default:" — "},{arg:"varOptions",des:"变量值数据源",type:"Array",options:" — ",default:" — "},{arg:"varSelectMode",des:"选择变量值模式",type:"string",options:" select | table | custom",default:" select "},{arg:"filterable",des:'变量是否可搜索选项（仅适用于 varSelectMode = "select" 时）',type:"Boolean",options:" — ",default:"false"},{arg:"extraSymbols",des:"附加的自定义符号",type:"Array",options:" — ",default:" — "},{arg:"errmsg",des:"错误信息",type:"string | Boolean",options:" — ",default:" — "},{arg:"varOffset",des:"变量是否有偏移量",type:"Boolean",options:" — ",default:" false "},{arg:"offsetSpliter",des:"自定义变量值与偏移量值的分隔符号",type:"string",options:" — ",default:" | "},{arg:"varDecoration",des:"变量修饰符",type:"string",options:" — ",default:" — "}],eventTableData:[{name:"change",des:"值发生变化时触发",arg:"当前值"}],methodTableData:[{name:"getStrResult",des:"获取字符串类型的表示式",arg:" — "},{name:"validate",des:"进行一次内置的默认校验并返回校验结果",arg:" — "}]}},methods:{look:function(){var e=this.$refs.fe.getStrResult();console.log(e),console.log(this.formula)}}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-content-container"},[t("h1",[e._v("FormulaEditor 公式编辑器")]),t("h2",[e._v("设计思路")]),t("ul",[t("li",[e._v("公式编辑器常用于表单内数据编辑，因此本组件侧重于编辑功能，即数据输入的手段。")]),t("li",[e._v("编辑公式时应该在头部展示结果字符串以预览效果。")]),t("li",[e._v("修改变量应该可以在任意位置修改。")]),t("li",[e._v("本组件的工作模式类似于原生的"+e._s(" < select />")+"，需要装填变量数据源；单项类似于"+e._s(" < option />")+"根据值渲染文字。 ")]),t("li",[e._v("因在实际应用时，变量数据往往巨大且逻辑关系纷繁复杂。所以提供两种默认选择变量的模式，以及自定义选择模式。当变量数据较少时可选用 select 模式；当变量数据较多时可选用 table 模式。如果变量的选取需要调用多接口复杂查询（或前两种模式无法满足需求）时，请使用自定义选择模式（例如根据树形结构查询变量表格）。自定义选择模式下仅暴露变量点击事件（要选择时）接口，具体UI需自行编写。")]),t("li",[e._v("公式内容由固定值（数字）、变量、符号3种类型组成。")]),t("li",[e._v("默认的运算符号只有+-*/()，预留了 extraSymbols 属性用以添加额外的自定义符号。")]),t("li",[e._v('公式编辑器拥有内置默认的公式校验方法：1.变量不能连续出现；2.（固定值）数字不能连续出现；3.符号非 "(" 或 ")" 则不能连续出现；4.不能以非 "(" 符号开头。这些内置的规则只是初步鉴定，无法保证所编辑的公式的合法性，如果您的公式校验规则复杂，需要您配合 @change 事件自行编写校验逻辑代码并将结论反馈给预留的 errmsg 接口。当 errmsg 有值时则显示其内容作为错误信息；否则按照默认的内置规则显示公式的错误信息。如果给 errmsg 赋了 false，则无论如何也不会显示错误信息。')]),t("li",[e._v("适配瑞太的业务逻辑，公式变量可能存在常数偏移量，使用 varOffset 控制是否开启之。")]),t("li",[e._v("开启偏移量校正后，组件会自动读取值分隔符后面的字符，并将之转为数字作为偏移量值;如果初始值里面没有偏移量，那么组件会将之自动校正至0。")]),t("li",[e._v("预留了变量值修饰符接口，你可以按照自己的喜好定义之。")])]),t("h2",[e._v("基础用法")]),t("demo-block",{attrs:{height:"400"},scopedSlots:e._u([{key:"main",fn:function(){return[t("rt-formula-editor",{ref:"fe",attrs:{varOptions:e.varOptions,filterable:"",extraSymbols:e.extraSymbols,varOffset:"",varDecoration:"[]",errmsg:"错误信息"},model:{value:e.formula,callback:function(t){e.formula=t},expression:"formula"}}),t("el-button",{on:{click:e.look}},[e._v("查看值")])]},proxy:!0},{key:"codes",fn:function(){return[t("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[e._v("        "),t("code",{staticClass:"html"},[e._v(e._s(e.codehtml))]),e._v("\n        "),t("code",{staticClass:"javascript"},[e._v(e._s(e.code))]),e._v("\n      ")])]},proxy:!0}])}),t("h2",[e._v("Attributes")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.attrTableData}},[t("el-table-column",{attrs:{prop:"arg",label:"参数",width:"180"}}),t("el-table-column",{attrs:{prop:"des",label:"说明"}}),t("el-table-column",{attrs:{prop:"type",label:"类型",width:"150"}}),t("el-table-column",{attrs:{prop:"options",label:"可选值"}}),t("el-table-column",{attrs:{prop:"default",label:"默认值",width:"100"}})],1),t("h2",[e._v("Events")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.eventTableData}},[t("el-table-column",{attrs:{prop:"name",label:"事件名称",width:"180"}}),t("el-table-column",{attrs:{prop:"des",label:"说明"}}),t("el-table-column",{attrs:{prop:"arg",label:"回调参数",width:"150"}})],1),t("h2",[e._v("Methods")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.methodTableData}},[t("el-table-column",{attrs:{prop:"name",label:"方法名",width:"180"}}),t("el-table-column",{attrs:{prop:"des",label:"说明"}}),t("el-table-column",{attrs:{prop:"arg",label:"参数",width:"150"}})],1)],1)}),[],!1,null,"fb528284",null,null).exports)}}}));
