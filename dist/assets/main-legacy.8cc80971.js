!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,l){if(!e)return;if("string"==typeof e)return t(e,l);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return t(e,l)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var l=0,n=new Array(t);l<t;l++)n[l]=e[l];return n}System.register(["./index-legacy.3bb36a95.js"],(function(t,l){"use strict";var n,r=document.createElement("style");return r.textContent="p[data-v-6f26d87f]{font-size:15px}li[data-v-6f26d87f]{font-size:15px;margin-bottom:.6em}\n",document.head.appendChild(r),{setters:[function(e){n=e.n}],execute:function(){var l=n({data:function(){return{formula:[],varOptions:[{label:"第一个选项",value:"option1"},{label:"第二个选项",value:"option2"},{label:"第三个选项",value:"option3"}],codehtml:'<rt-formula-editor ref="fe" v-model="formula" :varOptions="varOptions"></rt-formula-editor>',code:'export default {\n  data() {\n    return {\n      formula: [],\n      varOptions: [\n        { label: "第一个选项", value: "option1" },\n        { label: "第二个选项", value: "option2" },\n        { label: "第三个选项", value: "option3" },\n      ],\n    }\n  }\n}'}}},(function(){var e=this,t=e._self._c;return t("div",[t("h2",[e._v("基础用法")]),t("demo-block",{attrs:{height:"400"},scopedSlots:e._u([{key:"main",fn:function(){return[t("rt-formula-editor",{ref:"fe",attrs:{varOptions:e.varOptions},model:{value:e.formula,callback:function(t){e.formula=t},expression:"formula"}})]},proxy:!0},{key:"codes",fn:function(){return[t("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[e._v("        "),t("code",{staticClass:"html"},[e._v(e._s(e.codehtml))]),e._v("\n        "),t("code",{staticClass:"javascript"},[e._v(e._s(e.code))]),e._v("\n      ")])]},proxy:!0}])})],1)}),[],!1,null,"3ada68d7",null,null).exports,r=n({data:function(){return{formula:[],varOptions:[{label:"第一个选项",value:"option1"},{label:"第二个选项",value:"option2"},{label:"第三个选项",value:"option3"}],codehtml:'<rt-formula-editor ref="fe" v-model="formula" :varOptions="varOptions" filterable></rt-formula-editor>',code:'export default {\n  data() {\n    return {\n      formula: [],\n      varOptions: [\n        { label: "第一个选项", value: "option1" },\n        { label: "第二个选项", value: "option2" },\n        { label: "第三个选项", value: "option3" },\n      ],\n    }\n  }\n}'}}},(function(){var e=this,t=e._self._c;return t("div",[t("h2",[e._v("变量选项可搜索")]),t("p",[e._v("仅 mode 为 select 时")]),t("demo-block",{attrs:{height:"400"},scopedSlots:e._u([{key:"main",fn:function(){return[t("rt-formula-editor",{ref:"fe",attrs:{varOptions:e.varOptions,filterable:""},model:{value:e.formula,callback:function(t){e.formula=t},expression:"formula"}})]},proxy:!0},{key:"codes",fn:function(){return[t("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[e._v("        "),t("code",{staticClass:"html"},[e._v(e._s(e.codehtml))]),e._v("\n        "),t("code",{staticClass:"javascript"},[e._v(e._s(e.code))]),e._v("\n      ")])]},proxy:!0}])})],1)}),[],!1,null,"426f833a",null,null).exports,a=n({data:function(){return{formula:[],varOptions:[{label:"第一个选项",value:"option1"},{label:"第二个选项",value:"option2"},{label:"第三个选项",value:"option3"}],extraSymbols:[{label:"$",value:"$"},{label:"^",value:"^"},{label:"&",value:"&"},{label:"恶意的非常规符号",value:"hell1"}],codehtml:'<rt-formula-editor ref="fe" v-model="formula" :varOptions="varOptions" :extraSymbols="extraSymbols"></rt-formula-editor>',code:"export default {\n  data() {\n    return {\n      formula: [],\n      varOptions: [\n        { label: \"第一个选项\", value: \"option1\" },\n        { label: \"第二个选项\", value: \"option2\" },\n        { label: \"第三个选项\", value: \"option3\" },\n      ],\n      extraSymbols: [\n        { label: '$', value: '$' },\n        { label: '^', value: '^' },\n        { label: '&', value: '&' },\n        { label: '恶意的非常规符号', value: 'hell1' },\n      ],\n    }\n  }\n}"}}},(function(){var e=this,t=e._self._c;return t("div",[t("h2",[e._v("自定义附加符号")]),t("p",[e._v("仅 mode 为 select 时")]),t("demo-block",{attrs:{height:"400"},scopedSlots:e._u([{key:"main",fn:function(){return[t("rt-formula-editor",{ref:"fe",attrs:{varOptions:e.varOptions,extraSymbols:e.extraSymbols},model:{value:e.formula,callback:function(t){e.formula=t},expression:"formula"}})]},proxy:!0},{key:"codes",fn:function(){return[t("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[e._v("        "),t("code",{staticClass:"html"},[e._v(e._s(e.codehtml))]),e._v("\n        "),t("code",{staticClass:"javascript"},[e._v(e._s(e.code))]),e._v("\n      ")])]},proxy:!0}])})],1)}),[],!1,null,"84bd6546",null,null).exports,o=n({data:function(){return{formula:[],varOptions:[{label:"第一个选项",value:"option1"},{label:"第二个选项",value:"option2"},{label:"第三个选项",value:"option3"}],codehtml:'<rt-formula-editor ref="fe" v-model="formula" :varOptions="varOptions" errmsg="这里是一些错误信息"></rt-formula-editor>',code:'export default {\n  data() {\n    return {\n      formula: [],\n      varOptions: [\n        { label: "第一个选项", value: "option1" },\n        { label: "第二个选项", value: "option2" },\n        { label: "第三个选项", value: "option3" },\n      ],\n    }\n  }\n}'}}},(function(){var e=this,t=e._self._c;return t("div",[t("h2",[e._v("错误信息")]),t("demo-block",{attrs:{height:"400"},scopedSlots:e._u([{key:"main",fn:function(){return[t("rt-formula-editor",{ref:"fe",attrs:{varOptions:e.varOptions,errmsg:"这里是一些错误信息"},model:{value:e.formula,callback:function(t){e.formula=t},expression:"formula"}})]},proxy:!0},{key:"codes",fn:function(){return[t("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[e._v("        "),t("code",{staticClass:"html"},[e._v(e._s(e.codehtml))]),e._v("\n        "),t("code",{staticClass:"javascript"},[e._v(e._s(e.code))]),e._v("\n      ")])]},proxy:!0}])})],1)}),[],!1,null,"22cbff0e",null,null).exports,i=n({data:function(){return{formula:[],varOptions:[{label:"第一个选项",value:"option1"},{label:"第二个选项",value:"option2"},{label:"第三个选项",value:"option3"}],codehtml:'<rt-formula-editor ref="fe" v-model="formula" :varOptions="varOptions" varOffset></rt-formula-editor>',code:'export default {\n  data() {\n    return {\n      formula: [],\n      varOptions: [\n        { label: "第一个选项", value: "option1" },\n        { label: "第二个选项", value: "option2" },\n        { label: "第三个选项", value: "option3" },\n      ],\n    }\n  }\n}'}}},(function(){var e=this,t=e._self._c;return t("div",[t("h2",[e._v("带偏移量的变量")]),t("demo-block",{attrs:{height:"400"},scopedSlots:e._u([{key:"main",fn:function(){return[t("rt-formula-editor",{ref:"fe",attrs:{varOptions:e.varOptions,varOffset:""},model:{value:e.formula,callback:function(t){e.formula=t},expression:"formula"}})]},proxy:!0},{key:"codes",fn:function(){return[t("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[e._v("        "),t("code",{staticClass:"html"},[e._v(e._s(e.codehtml))]),e._v("\n        "),t("code",{staticClass:"javascript"},[e._v(e._s(e.code))]),e._v("\n      ")])]},proxy:!0}])})],1)}),[],!1,null,"9578def6",null,null).exports,s=n({data:function(){return{formula:[],varOptions:[{label:"第一个选项",value:"option1"},{label:"第二个选项",value:"option2"},{label:"第三个选项",value:"option3"}],rules:[{fn:function(e){return e.length>5},msg:"公式长度不能超过5!"},{fn:function(e){for(var t=e.map((function(e){return e.value})),l=0;l<e.length;l++){var n=t[l],r=t[l+1];return 5===n&&"*"===r}},msg:"公式内容里不能包含5*"}],codehtml:'<rt-formula-editor ref="fe" v-model="formula" :varOptions="varOptions" :rules="rules"></rt-formula-editor>',code:'export default {\n  data() {\n    return {\n      formula: [],\n      varOptions: [\n        { label: "第一个选项", value: "option1" },\n        { label: "第二个选项", value: "option2" },\n        { label: "第三个选项", value: "option3" },\n      ],\n      rules: [\n        {\n          fn: (elementArr) => {\n            return elementArr.length > 5;\n          },\n          msg: \'公式长度不能超过5!\'\n        },\n        {\n          fn: (elementArr) => {\n            const valueArr = elementArr.map((item) => { return item.value; });\n\n            for (let i = 0; i < elementArr.length; i++) {\n              let currV = valueArr[i];\n              let nextV = valueArr[i + 1];\n\n              return currV === 5 && nextV === \'*\'\n            }\n          },\n          msg: \'公式内容里不能包含5*\'\n        },\n      ],\n    }\n  }\n}'}}},(function(){var e=this,t=e._self._c;return t("div",[t("h2",[e._v("自定义校验规则")]),t("demo-block",{attrs:{height:"700"},scopedSlots:e._u([{key:"main",fn:function(){return[t("rt-formula-editor",{ref:"fe",attrs:{varOptions:e.varOptions,rules:e.rules},model:{value:e.formula,callback:function(t){e.formula=t},expression:"formula"}})]},proxy:!0},{key:"codes",fn:function(){return[t("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[e._v("        "),t("code",{staticClass:"html"},[e._v(e._s(e.codehtml))]),e._v("\n        "),t("code",{staticClass:"javascript"},[e._v(e._s(e.code))]),e._v("\n      ")])]},proxy:!0}])})],1)}),[],!1,null,"c543d70b",null,null).exports,u=n({data:function(){return{formula:[],varOptions:[],extraSymbols:[{label:"$",value:"$"},{label:"^",value:"^"},{label:"&",value:"&"}],codehtml:'<rt-formula-editor ref="fe" v-model="formula" :varOptions="varOptions" :extraSymbols="extraSymbols" mode="list"></rt-formula-editor>',code:"export default {\n  data() {\n    return {\n      formula: [],\n      varOptions: [\n        { label: \"第一个选项\", value: \"option1\" },\n        { label: \"第二个选项\", value: \"option2\" },\n        { label: \"第三个选项\", value: \"option3\" },\n      ],\n      extraSymbols: [\n        { label: '$', value: '$' },\n        { label: '^', value: '^' },\n        { label: '&', value: '&' },\n        { label: '恶意的非常规符号', value: 'hell1' },\n      ],\n    }\n  },\n  mounted() {\n    let result = []\n    for (let i = 1; i < 33; i++) {\n      result.push({ label: `第${i}个选项`, value: `option${i}` })\n    }\n    for (let i = 33; i < 67; i++) {\n      result.push({ label: `第${i}个恶意的巨长无比的选项选项选项选`, value: `option${i}` })\n    }\n    for (let i = 67; i < 100; i++) {\n      result.push({ label: `第${i}个选项`, value: `option${i}` })\n    }\n    this.varOptions = result;\n  },\n}"}},mounted:function(){for(var e=[],t=1;t<33;t++)e.push({label:"第".concat(t,"个选项"),value:"option".concat(t)});for(var l=33;l<67;l++)e.push({label:"第".concat(l,"个恶意的巨长无比的选项选项选项选"),value:"option".concat(l)});for(var n=67;n<100;n++)e.push({label:"第".concat(n,"个选项"),value:"option".concat(n)});this.varOptions=e}},(function(){var e=this,t=e._self._c;return t("div",[t("h2",[e._v("列表模式选择变量")]),t("demo-block",{attrs:{height:"640"},scopedSlots:e._u([{key:"main",fn:function(){return[t("rt-formula-editor",{ref:"fe",attrs:{varOptions:e.varOptions,extraSymbols:e.extraSymbols,mode:"list"},model:{value:e.formula,callback:function(t){e.formula=t},expression:"formula"}})]},proxy:!0},{key:"codes",fn:function(){return[t("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[e._v("        "),t("code",{staticClass:"html"},[e._v(e._s(e.codehtml))]),e._v("\n        "),t("code",{staticClass:"javascript"},[e._v(e._s(e.code))]),e._v("\n      ")])]},proxy:!0}])})],1)}),[],!1,null,"8eb3dd3d",null,null).exports,c=n({data:function(){return{selecting:!1,currentIndex:0,formula:[],varOptions:[{label:"第一个自定义的选项",value:"option1"},{label:"第二个自定义的选项",value:"option2"},{label:"第三个自定义的选项",value:"option3"}],rules:[{fn:function(e){return e.length>5},msg:"公式长度不能超过5!"},{fn:function(e){for(var t=e.map((function(e){return e.value})),l=0;l<e.length;l++){var n=t[l],r=t[l+1];return 5===n&&"*"===r}},msg:"公式内容里不能包含5*"}],codehtml:'<rt-formula-editor ref="fe" v-model="formula" :varOptions="varOptions" :rules="rules" mode="custom"\n          @select="onSelect"></rt-formula-editor>\n        <el-dialog :visible.sync="selecting" title="选择自定义的变量">\n          <el-button v-for="(item) in varOptions" :key="item.value" @click="() => onChoose(item.value)">\n            {{ item.label }}\n          </el-button>\n        </el-dialog>',code:'export default {\n  data() {\n    return {\n      selecting: false,\n      currentIndex: 0,\n      formula: [],\n      varOptions: [\n        { label: "第一个自定义的选项", value: "option1" },\n        { label: "第二个自定义的选项", value: "option2" },\n        { label: "第三个自定义的选项", value: "option3" },\n      ],\n      rules: [\n        {\n          fn: (elementArr) => {\n            return elementArr.length > 5;\n          },\n          msg: \'公式长度不能超过5!\'\n        },\n        {\n          fn: (elementArr) => {\n            const valueArr = elementArr.map((item) => { return item.value; });\n\n            for (let i = 0; i < elementArr.length; i++) {\n              let currV = valueArr[i];\n              let nextV = valueArr[i + 1];\n\n              return currV === 5 && nextV === \'*\'\n            }\n          },\n          msg: \'公式内容里不能包含5*\'\n        },\n      ],\n    }\n  },\n  methods: {\n    onSelect(index) {\n      this.selecting = true;\n      this.currentIndex = index;\n    },\n    onChoose(v) {\n      const { currentIndex, formula } = this;\n      let result = [...formula];\n      result[currentIndex] = v;\n      this.formula = result;\n      this.selecting = false;\n    },\n  }\n}'}},methods:{onSelect:function(e){this.selecting=!0,this.currentIndex=e},onChoose:function(t){var l=this.currentIndex,n=e(this.formula);n[l]=t,this.formula=n,this.selecting=!1}}},(function(){var e=this,t=e._self._c;return t("div",[t("h2",[e._v("自定义变量选择")]),t("demo-block",{attrs:{height:"950"},scopedSlots:e._u([{key:"main",fn:function(){return[t("rt-formula-editor",{ref:"fe",attrs:{varOptions:e.varOptions,rules:e.rules,mode:"custom"},on:{select:e.onSelect},model:{value:e.formula,callback:function(t){e.formula=t},expression:"formula"}}),t("el-dialog",{attrs:{visible:e.selecting,title:"选择自定义的变量"},on:{"update:visible":function(t){e.selecting=t}}},e._l(e.varOptions,(function(l){return t("el-button",{key:l.value,on:{click:function(){return e.onChoose(l.value)}}},[e._v(" "+e._s(l.label)+" ")])})),1)]},proxy:!0},{key:"codes",fn:function(){return[t("pre",{directives:[{name:"highlightjs",rawName:"v-highlightjs"}]},[e._v("        "),t("code",{staticClass:"html"},[e._v(e._s(e.codehtml))]),e._v("\n        "),t("code",{staticClass:"javascript"},[e._v(e._s(e.code))]),e._v("\n      ")])]},proxy:!0}])})],1)}),[],!1,null,"9dfc19d8",null,null).exports;t("default",n({components:{Basic:l,Filterable:r,CustomSymbols:a,ErrorMsg:o,Offsets:i,CustomRules:s,ListTable:u,CustomVarSelector:c},data:function(){return{attrTableData:[{arg:"value/v-model",des:"绑定值",type:"Array",options:" — ",default:" — "},{arg:"varOptions",des:"变量值数据源",type:"Array",options:" — ",default:" — "},{arg:"mode",des:"选择变量值模式",type:"string",options:" select | list | custom",default:" select "},{arg:"filterable",des:'变量是否可搜索选项（仅适用于 varSelectMode = "select" 时）',type:"Boolean",options:" — ",default:"false"},{arg:"extraSymbols",des:"附加的自定义符号",type:"Array",options:" — ",default:" — "},{arg:"errmsg",des:"错误信息",type:"string | Boolean",options:" — ",default:" — "},{arg:"varOffset",des:"变量是否有偏移量",type:"Boolean",options:" — ",default:" false "},{arg:"offsetSpliter",des:"自定义变量值与偏移量值的分隔符号",type:"string",options:" — ",default:" | "},{arg:"varDecoration",des:"变量修饰符",type:"string",options:" — ",default:" — "},{arg:"rules",des:"附加的判断规则，用于判断公式的合法性",type:"Array<function(elArr)>",options:" — ",default:" — "}],eventTableData:[{name:"change",des:"值发生变化时触发",arg:"当前值"},{name:"select",des:"配合mode=custom时使用",arg:"当前操作项索引"}],methodTableData:[{name:"getStrResult",des:"获取字符串类型的表示式",arg:" — "}]}}},(function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-content-container"},[t("h1",[e._v("FormulaEditor 公式编辑器")]),t("h2",[e._v("设计思路")]),t("ul",[t("li",[e._v("公式编辑器常用于表单内数据编辑，因此本组件侧重于编辑功能，即数据输入的手段。")]),t("li",[e._v("编辑公式时应该在头部展示结果字符串以预览效果。")]),t("li",[e._v("修改变量应该可以在任意位置修改。")]),t("li",[e._v("本组件的工作模式类似于原生的"+e._s(" < select />")+"，需要装填变量数据源；单项类似于"+e._s(" < option />")+"根据值渲染文字。 ")]),t("li",[e._v("因在实际应用时，变量数据往往巨大且逻辑关系纷繁复杂。所以提供两种默认选择变量的模式，以及自定义选择模式。当变量数据较少时可选用 select 模式；当变量数据较多时可选用 list 模式。如果变量的选取需要调用多接口复杂查询（或前两种模式无法满足需求）时，请使用自定义选择模式（例如根据树形结构查询变量表格）。自定义选择模式下仅暴露变量点击事件（要选择时）接口，具体UI需自行编写。")]),t("li",[e._v("公式内容由固定值（数字）、变量、符号3种类型组成。")]),t("li",[e._v("默认的运算符号只有+-*/()，预留了 extraSymbols 属性用以添加额外的自定义符号。")]),t("li",[e._v('公式编辑器拥有内置默认的公式校验方法：1.变量不能连续出现；2.常量（数字）不能连续出现；3.符号非 "(" 或 ")" 则不能连续出现；4.不能以非 "(" 符号开头;5.变量和常量（数字）不能连续出现。这些内置的规则只是初步鉴定，无法保证所编辑的公式的合法性，如果您的公式校验规则复杂，需要您配合 @change 事件自行编写校验逻辑代码并将结论反馈给预留的 errmsg 接口。当 errmsg 有值时则显示其内容作为错误信息；否则按照默认的内置规则显示公式的错误信息。如果给 errmsg 赋了 false，则无论如何也不会显示错误信息。')]),t("li",[e._v("适配瑞太的业务逻辑，公式变量可能存在常数偏移量，使用 varOffset 控制是否开启之。")]),t("li",[e._v("开启偏移量校正后，组件会自动读取值分隔符后面的字符，并将之转为数字作为偏移量值;如果初始值里面没有偏移量，那么组件会将之自动校正至0。")]),t("li",[e._v("预留了变量值修饰符接口，你可以按照自己的喜好定义之。")])]),t("Basic"),t("div",{staticStyle:{height:"30px"}}),t("Filterable"),t("div",{staticStyle:{height:"30px"}}),t("CustomSymbols"),t("div",{staticStyle:{height:"30px"}}),t("ErrorMsg"),t("div",{staticStyle:{height:"30px"}}),t("Offsets"),t("div",{staticStyle:{height:"30px"}}),t("CustomRules"),t("div",{staticStyle:{height:"30px"}}),t("ListTable"),t("div",{staticStyle:{height:"30px"}}),t("CustomVarSelector"),t("div",{staticStyle:{height:"30px"}}),t("h2",[e._v("Attributes")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.attrTableData}},[t("el-table-column",{attrs:{prop:"arg",label:"参数",width:"180"}}),t("el-table-column",{attrs:{prop:"des",label:"说明"}}),t("el-table-column",{attrs:{prop:"type",label:"类型",width:"150"}}),t("el-table-column",{attrs:{prop:"options",label:"可选值"}}),t("el-table-column",{attrs:{prop:"default",label:"默认值",width:"100"}})],1),t("h2",[e._v("Events")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.eventTableData}},[t("el-table-column",{attrs:{prop:"name",label:"事件名称",width:"180"}}),t("el-table-column",{attrs:{prop:"des",label:"说明"}}),t("el-table-column",{attrs:{prop:"arg",label:"回调参数",width:"150"}})],1),t("h2",[e._v("Methods")]),t("el-table",{staticStyle:{width:"100%"},attrs:{data:e.methodTableData}},[t("el-table-column",{attrs:{prop:"name",label:"方法名",width:"180"}}),t("el-table-column",{attrs:{prop:"des",label:"说明"}}),t("el-table-column",{attrs:{prop:"arg",label:"参数",width:"150"}})],1)],1)}),[],!1,null,"6f26d87f",null,null).exports)}}}))}();
